<!DOCTYPE html>
<html>
<head>
    <title>Real-time map</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css"/>
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.1/socket.io.min.js"></script>
</head>
<body>
    <div id="map" style="height: 600px;"></div>

    <script>
        // Initialize the map
        var map = L.map('map').setView([51.505, -0.09], 13);
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            maxZoom: 19,
        }).addTo(map);

        // Connect to the Socket.IO server
        var socket = io.connect('/');

        // Listen for the 'map_updated' event
        socket.on('map_updated', function(data) {
            // Remove all existing markers
            map.eachLayer(function(layer) {
                if (layer instanceof L.Marker) {
                    map.removeLayer(layer);
                }
            });

            // Add a new marker for each set of coordinates
            data.map_data.forEach(function(coords) {
                L.marker([coords.lat, coords.lng]).addTo(map);
            });
        });
    </script>
</body>
</html>